!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}(window,(function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);const i=e=>new Promise(t=>setTimeout(t,e)),r=(e,t,n,i)=>Math.sqrt(Math.pow(e-t,2)+Math.pow(n-i,2));class o{constructor(e,t=null,n=null,i=null){this.value=e,this.left=n,this.right=i,this.parent=t,this.height=0,this.level=0,this.extras={initialized:!1,entered:!1}}}class a{static async push(e,t,n,r=null,s=0){return t?(n>t.value?(e.highlightedNode=t,e.info=`Inserting ${n} | ${n} is bigger than ${t.value} so we go right!`,await i(e.delay),t.right=await a.push(e,t.right,n,t,s+1)):n<t.value?(e.highlightedNode=t,e.info=`Inserting ${n} | ${n} is less than ${t.value} so we go left!`,await i(e.delay),t.left=await a.push(e,t.left,n,t,s+1)):(e.highlightedNode=null,e.info=""),t.height=Math.max(a.height(t.left),a.height(t.right))+1,t.level=s,t):(e.info="",e.highlightedNode=null,new o(n,r))}static height(e){return e?e.height:0}static breadthFirstTraverse(e,t){if(!e)return;const n=[];for(n.push(e);n.length;){const e=n.shift();t(e),e.left&&n.push(e.left),e.right&&n.push(e.right)}}}const s=(e,t=0,n=0)=>{0===t&&0===n||a.breadthFirstTraverse(e,e=>{e.extras.x+=t,e.extras.x+=n})},l=(e,t)=>{let n=t.parent;const{padding:i,radius:r}=e;for(;n;){if(t.value>n.value&&t.extras.x<=n.extras.x){s(n.right,n.extras.x-t.extras.x+i+2*r),a.breadthFirstTraverse(n.right,t=>{l(e,t)});break}if(t.value<n.value&&t.extras.x>=n.extras.x){s(n.left,-(t.extras.x-n.extras.x+i+2*r)),a.breadthFirstTraverse(n.left,t=>{l(e,t)});break}n=n.parent}},d=(e,t,n=null)=>{if(t){if(t.extras.initialized)t.extras.entered||(t.extras.multiplier+=.03,t.extras.multiplier>1&&(t.extras.entered=!0));else{t.extras.multiplier=0;const{x:i,y:r}=((e,t,n)=>{const{radius:i,padding:r,dimensions:o}=e;return n?{x:n.extras.x+(n.left===t?-1:1)*(r+2*i),y:n.extras.y+r+2*i}:{x:0,y:-o.height/2+r+i}})(e,t,n);t.extras.x=i,t.extras.y=r,l(e,t),(e=>{const{camera:t,tree:n}=e;a.breadthFirstTraverse(n,e=>{t.bounds.minX=Math.min(e.extras.x,t.bounds.minX),t.bounds.minY=Math.min(e.extras.y,t.bounds.minY),t.bounds.maxX=Math.max(e.extras.x,t.bounds.maxX),t.bounds.maxY=Math.max(e.extras.y,t.bounds.maxY)})})(e),t.extras.initialized=!0}d(e,t.left,t),d(e,t.right,t)}},u=(e,t,n=null)=>{if(!t)return;const{lineWidth:i,radius:o,fontSize:a,highlightedNode:s,ctx:l,colors:d}=e;if(l.save(),l.lineWidth=i,l.font=a+"pt Arial",n){l.save(),l.strokeStyle=d.connector;const e=n.extras.x-t.extras.x,i=n.extras.y-t.extras.y,a=Math.atan2(i,e),s={x:n.extras.x-o*Math.cos(a),y:n.extras.y-o*Math.sin(a)},u=r(n.extras.x,t.extras.x,n.extras.y,t.extras.y)-2*o,h={x:s.x+u*t.extras.multiplier*Math.cos(a+Math.PI),y:s.y+u*t.extras.multiplier*Math.sin(a+Math.PI)};l.beginPath(),l.moveTo(s.x,s.y),l.lineTo(h.x,h.y),l.stroke(),l.restore()}let{x:h,y:c}=t.extras;if(l.fillStyle=d.nodeBackground,l.strokeStyle=t===s?d.nodeBorderHighlight:d.nodeBorder,l.beginPath(),l.arc(h,c,t.extras.multiplier*o,0,2*Math.PI),l.stroke(),l.fill(),l.fillStyle=t===s?d.nodeTextHighlight:d.nodeText,t.extras.entered){const e=l.measureText(t.value);l.fillText(t.value,h-e.width/2,c+l.measureText("M").width/2-2)}l.restore(),u(e,t.left,t),u(e,t.right,t)},h=e=>{const{radius:t,headsup:n,fontSize:i,ctx:o,info:a,lineWidth:s,colors:l}=e,{nextPos:{x:d,y:u},curPos:{x:h,y:c}}=n,x=r(d,h,u,c)*n.multiplier,m=(g=d,f=h,y=u,p=c,Math.atan2(y-p,g-f));var g,f,y,p;const w=x*Math.cos(m),v=x*Math.sin(m);o.font=.8*i+"pt Arial",o.save();const{width:b}=o.measureText(a),{width:M}=o.measureText("M");o.fillStyle=l.headsupBackground,o.fillRect(h+w+t+10,c+v-M/2-10,b+20,M+10),o.fillStyle=l.headsupColor,o.fillText(a,h+w+t+20,c+v),o.strokeStyle=l.headsupColor,o.lineWidth=s;const k=h+w,P=c+v-t-20;o.beginPath(),o.moveTo(k,P),o.lineTo(k,P-50),o.stroke(),o.beginPath(),o.moveTo(k,P+10),o.lineTo(k-10,P-5),o.lineTo(k+10,P-5),o.fill(),o.restore()};const c={canvas:document.querySelector("#canvas"),ctx:canvas.getContext("2d"),headsup:{curPos:{},nextPos:{},transitioned:!0,initialized:!1,multiplier:0},delay:2e3,highlightedNode:null,info:"",dimensions:{width:window.innerWidth,height:window.innerHeight},tree:null,mouse:{downPos:{x:0,y:0},oldCamera:{x:0,y:0},isDown:!1},camera:{x:0,y:0,zoom:1,bounds:{minX:1/0,maxX:-1/0,minY:1/0,maxY:-1/0}},colors:{nodeBorder:"black",nodeText:"black",nodeBorderHighlight:"red",nodeTextHighlight:"red",nodeBackground:"white",connector:"black",headsupBackground:"white",headsupColor:"red"},radius:30,padding:20,fontSize:14,lineWidth:5,inserting:!1},x=()=>{const{dimensions:{width:e,height:t},camera:n,highlightedNode:i,headsup:r,ctx:o}=c,a=e/2,s=t/2;o.save(),o.translate(a+n.x,s+n.y),o.scale(n.zoom,n.zoom),o.clearRect(100*-a,100*-s,200*e,200*t),d(c,c.tree),u(c,c.tree),i?((e=>{const{highlightedNode:t,headsup:n}=e,{x:i,y:r}=t.extras;if(!n.initialized)return n.curPos={x:i,y:r},n.nextPos={x:i,y:r},n.initialized=!0,void(n.transitioned=!0);n.transitioned?(n.nextPos={x:i,y:r},n.transitioned=!1,n.multiplier=0):(n.multiplier>1&&(n.curPos={...n.nextPos},n.transitioned=!0),n.multiplier+=.05)})(c),h(c)):r.initialized=!1,o.restore(),window.requestAnimationFrame(x)};!function(e){const t=document.querySelector("#insert"),n=document.querySelector("#delay"),i=document.querySelector("#random"),r=document.querySelector("#help"),o=document.querySelector("#download-link");n.value=e.delay;const s=()=>{const{dimensions:t,canvas:n}=e;t.width=window.innerWidth,t.height=window.innerHeight,n.width=t.width,n.height=t.height};window.addEventListener("resize",s),s(),canvas.addEventListener("mousedown",({clientX:t,clientY:n})=>{const{mouse:i,camera:r,canvas:o}=e;i.downPos.x=t,i.downPos.y=n,i.oldCamera.x=r.x,i.oldCamera.y=r.y,i.isDown=!0,o.style.cursor="grabbing"}),window.addEventListener("mouseup",()=>{const{mouse:t,canvas:n}=e;t.isDown=!1,n.style.cursor="grab"}),window.addEventListener("keydown",({key:t})=>{const{camera:n}=e;switch(t){case"ArrowUp":n.zoom+=.05;break;case"ArrowDown":n.zoom=Math.max(n.zoom-.05,0)}}),window.addEventListener("mousemove",({clientX:t,clientY:n})=>{const{mouse:i,tree:r,camera:o}=e;if(i.isDown&&r){const e=t-i.downPos.x+i.oldCamera.x,r=n-i.downPos.y+i.oldCamera.y;o.x=e,o.y=r}}),t.parentNode.querySelector("button").addEventListener("click",()=>{const{value:n}=t;e.inserting||n.length&&!Number.isNaN(+n)&&(e.inserting=!0,t.value="",a.push(e,e.tree,+n).then(t=>{e.tree=t,e.inserting=!1}))}),n.parentNode.querySelector("button").addEventListener("click",()=>{const{value:t}=n;t.length&&!Number.isNaN(+t)&&(e.delay=+t)}),i.addEventListener("click",()=>{e.inserting||(e.inserting=!0,a.push(e,e.tree,Math.floor(1e3*Math.random())).then(t=>{e.tree=t,e.inserting=!1}).catch(console.error))}),document.querySelector("#close-help").addEventListener("click",()=>{r.style.display="none"}),document.querySelector("#open-help").addEventListener("click",()=>{r.style.display="block"}),document.querySelector("#download").addEventListener("click",()=>{if(!e.tree)return;const{camera:t,radius:n,padding:i,dimensions:r,canvas:a}=e,s=t.zoom,l={x:t.x,y:t.y},d=2*(n+i);t.zoom=1,t.x=-t.bounds.minX-r.width/2+d/2,t.y=-t.bounds.minY-r.height/2+d/2,a.width=t.bounds.maxX-t.bounds.minX+d,a.height=t.bounds.maxY-t.bounds.minY+d,setTimeout(()=>{const e=a.toDataURL("image/png"),n=`bst_${Date.now()}.png`;o.href=e,o.download=n,o.click(),t.zoom=s,a.width=r.width,a.height=r.height,t.x=l.x,t.y=l.y},100)})}(c),window.requestAnimationFrame(x)}])}));
//# sourceMappingURL=bundle.min.js.map